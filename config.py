import logging
import os
from dotenv import load_dotenv

# === –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø –õ–û–ì–£–í–ê–ù–ù–Ø ===
logging.basicConfig(
    level=logging.INFO,
    format="%(asctime)s | %(levelname)-8s | %(name)s | %(message)s"
)
logger = logging.getLogger(__name__)

# === –ó–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ø –ó–ú–Ü–ù–ù–ò–• –°–ï–†–ï–î–û–í–ò–©–ê ===
load_dotenv()

TELEGRAM_BOT_TOKEN: str = os.getenv("TELEGRAM_BOT_TOKEN", "")
OPENAI_API_KEY: str = os.getenv("OPENAI_API_KEY", "")
ADMIN_USER_ID: int = int(os.getenv("ADMIN_USER_ID", "0"))

# === –ö–û–ù–°–¢–ê–ù–¢–ò ===
WELCOME_IMAGE_URL: str = "https://res.cloudinary.com/ha1pzppgf/image/upload/v1748286434/file_0000000017a46246b78bf97e2ecd9348_zuk16r.png"
MAX_TELEGRAM_MESSAGE_LENGTH: int = 4090
MAX_CHAT_HISTORY_LENGTH: int = 10

# === –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø –î–õ–Ø –ê–î–ê–ü–¢–ò–í–ù–û–á –ü–†–ò–°–£–¢–ù–û–°–¢–Ü ===
# –†–æ–∑—à–∏—Ä–µ–Ω–∏–π —Å–ø–∏—Å–æ–∫ —ñ–º–µ–Ω —Ç–∞ –∑–≤–µ—Ä–Ω–µ–Ω—å –¥–æ –±–æ—Ç–∞ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó —Ä–µ–∞–∫—Ü—ñ—ó.
BOT_NAMES: list[str] = [
    "–±–æ—Ç", "genius", "iui", # –û—Å–Ω–æ–≤–Ω—ñ
    "gg", "–≥–≥",             # –Ü–≥—Ä–æ–≤—ñ –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è
    "ai", "–∞—ñ", "—ñ—ñ"        # –¢–µ—Ö–Ω—ñ—á–Ω—ñ —Ç–∞ —Ñ–æ–Ω–µ—Ç–∏—á–Ω—ñ –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è
]
CONVERSATIONAL_COOLDOWN_SECONDS: int = 600 # 10 —Ö–≤–∏–ª–∏–Ω

# === –ù–û–í–ê –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø –î–õ–Ø –ü–ê–¢–Ü-–ú–ï–ù–ï–î–ñ–ï–†–ê ===
# –†–æ–∑—à–∏—Ä–µ–Ω–∏–π —Å–ø–∏—Å–æ–∫ —Ç—Ä–∏–≥–µ—Ä—ñ–≤ –¥–ª—è –∑–∞–ø—É—Å–∫—É FSM —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ç—ñ.
PARTY_TRIGGER_PHRASES: list[str] = [
    # –ö–ª–∞—Å–∏—á–Ω—ñ —Ñ—Ä–∞–∑–∏
    "—Ö—Ç–æ –≤ –ø–∞—Ç—ñ", "–≥–æ –ø–∞—Ç—ñ", "–∑–±–∏—Ä–∞—é –ø–∞—Ç—ñ", "—à—É–∫–∞—é –ø–∞—Ç—ñ", "–ø–æ–≥–Ω–∞–ª–∏ –ø–∞—Ç—ñ",
    "—Ö—Ç–æ –≥—Ä–∞—Ç–∏", "–≥–æ –≥—Ä–∞—Ç–∏", "–ø–æ–≥–Ω–∞–ª–∏ –≥—Ä–∞—Ç–∏", "—Ö—Ç–æ –∫–∞—Ç–∫—É",
    # –°—É—á–∞—Å–Ω–∏–π —Å–ª–µ–Ω–≥ —Ç–∞ —Å–∫–æ—Ä–æ—á–µ–Ω–Ω—è
    "–ø–∞—Ç—ñ", "–∑–±—ñ—Ä", "—Ç—ñ–º–∞", "—Ç—ñ–º—É", "–∫–∞—Ç–∫—É",
    # –§—Ä–∞–∑–∏ –∑ —Å–∏–º–≤–æ–ª–∞–º–∏
    "+ –≤ –ø–∞—Ç—ñ", "—Ö—Ç–æ +", "–ø–ª—é—Å –≤ –ø–∞—Ç—ñ",
    # –†–æ–∑–º–æ–≤–Ω—ñ –≤–∞—Ä—ñ–∞—Ü—ñ—ó
    "—î —Ö—Ç–æ –≥—Ä–∞—Ç–∏", "–ø–æ–≥–Ω–∞–ª–∏ –≤ –ø–∞—Ç—ñ", "–∑–±—ñ—Ä –Ω–∞ —Ä–µ–π—Ç–∏–Ω–≥", "–≥–æ –Ω–∞ —Ä–µ–π—Ç",
    "—à—É–∫–∞—é —Ç—ñ–º–µ–π—Ç—ñ–≤", "–≥–æ –∫–∞—Ç–∫—É —Ä–∞–∑–æ–º"
]
PARTY_LOBBY_ROLES: list[str] = ["–¢–∞–Ω–∫/–ü—ñ–¥—Ç—Ä–∏–º–∫–∞", "–õ—ñ—Å–Ω–∏–∫", "–ú–∞–≥ (–º—ñ–¥)", "–°—Ç—Ä—ñ–ª–µ—Ü—å (–∑–æ–ª–æ—Ç–æ)", "–ë–æ—î—Ü—å (–¥–æ—Å–≤—ñ–¥)"]
PARTY_LOBBY_COOLDOWN_SECONDS: int = 60 # 1 —Ö–≤–∏–ª–∏–Ω–∞ –Ω–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ª–æ–±—ñ –≤ —á–∞—Ç—ñ

# === –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø –¢–†–ò–ì–ï–†–Ü–í –î–õ–Ø –†–û–ó–ú–û–í–ò ===
# –†–æ–∑—à–∏—Ä–µ–Ω–∏–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –±—ñ–ª—å—à –∂–∏–≤–æ–≥–æ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è.
CONVERSATIONAL_TRIGGERS: dict[str, str] = {
    # –°–æ—Ü—ñ–∞–ª—å–Ω—ñ
    "—è–∫ —Å–ø—Ä–∞–≤–∏": "–î—Ä—É–∂–Ω—å–æ —ñ –∫–æ—Ä–æ—Ç–∫–æ –ø–æ—Ü—ñ–∫–∞–≤—Å—è, —è–∫ —Å–ø—Ä–∞–≤–∏ —É —Å–ø—ñ–≤—Ä–æ–∑–º–æ–≤–Ω–∏–∫–∞.",
    "—â–æ —Ä–æ–±–∏—à": "–í—ñ–¥–ø–æ–≤—ñ–¥–∞–π –∫–æ—Ä–æ—Ç–∫–æ —ñ –∑ –≥—É–º–æ—Ä–æ–º, –Ω—ñ–±–∏ —Ç–µ–±–µ –≤—ñ–¥–≤–æ–ª—ñ–∫–ª–∏ –≤—ñ–¥ –∞–Ω–∞–ª—ñ–∑—É —Ä–µ–ø–ª–µ—ó–≤.",
    "–ø—Ä–∏–≤—ñ—Ç": "–ü—Ä–∏–≤—ñ—Ç–∞–π—Å—è —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –º–æ–ª–æ–¥—ñ–∂–Ω–∏–π —Å–ª–µ–Ω–≥.",
    "–¥—è–∫—É—é": "–í—ñ–¥–ø–æ–≤—ñ–¥–∞–π –ª—é–±'—è–∑–Ω–æ, —â–æ –∑–∞–≤–∂–¥–∏ —Ä–∞–¥–∏–π –¥–æ–ø–æ–º–æ–≥—Ç–∏, –∞–¥–∂–µ —Ç–∏ GGenius.",
    # –ü—Ä–æ —Å–∞–º–æ–≥–æ –±–æ—Ç–∞
    "—â–æ —Ç–∏ –≤–º—ñ—î—à": "–†–æ–∑–∫–∞–∂–∏ –∫–æ—Ä–æ—Ç–∫–æ –ø—Ä–æ —Å–≤–æ—ó –æ—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó: –∞–Ω–∞–ª—ñ–∑ —Å–∫—Ä—ñ–Ω—à–æ—Ç—ñ–≤, –ø–æ—Ä–∞–¥–∏ –ø–æ –≥—Ä—ñ —Ç–∞ –¥–æ–ø–æ–º–æ–≥–∞ —É –∑–±–æ—Ä—ñ –ø–∞—Ç—ñ.",
    "—Ö—Ç–æ —Ç–µ–±–µ —Å—Ç–≤–æ—Ä–∏–≤": "–í—ñ–¥–ø–æ–≤—ñ–¥–∞–π –∑ –ø–æ–≤–∞–≥–æ—é —Ç–∞ –≥—É–º–æ—Ä–æ–º, —â–æ —Ç–∏ ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∞—Ü—ñ —Ç–∞ –≥–µ–Ω—ñ—è MLBB-BOSS, —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –¥–ª—è —Å–ø—ñ–ª—å–Ω–æ—Ç–∏.",
    "—Ç–∏ –±–æ—Ç": "–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏, —â–æ —Ç–∏ AI, –∞–ª–µ –∑ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º —Å–ø—Ä–∞–≤–∂–Ω—å–æ–≥–æ –≥–µ–π–º–µ—Ä–∞."
}

# === üÜï –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø –£–ù–Ü–í–ï–†–°–ê–õ–¨–ù–û–ì–û VISION –ú–û–î–£–õ–Ø ===
# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —Ç–∞ –æ–±—Ä–æ–±–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å
VISION_AUTO_RESPONSE_ENABLED: bool = True  # –í–∫–ª—é—á–∏—Ç–∏/–≤–∏–º–∫–Ω—É—Ç–∏ –∞–≤—Ç–æ—Ä–µ–∞–∫—Ü—ñ—é –Ω–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
VISION_RESPONSE_COOLDOWN_SECONDS: int = 30  # –ö—É–ª–¥–∞—É–Ω –º—ñ–∂ –æ–±—Ä–æ–±–∫–∞–º–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å –≤ –æ–¥–Ω–æ–º—É —á–∞—Ç—ñ
VISION_MAX_IMAGE_SIZE_MB: float = 10.0  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–ª—è –æ–±—Ä–æ–±–∫–∏ (–ú–ë)
VISION_QUALITY_THRESHOLD: str = "low"  # low/auto/high - —è–∫—ñ—Å—Ç—å –æ–±—Ä–æ–±–∫–∏ –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó —à–≤–∏–¥–∫–æ—Å—Ç—ñ

# –¢–∏–ø–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å, —è–∫—ñ –±–æ—Ç –º–æ–∂–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞—Ç–∏ —Ç–∞ –æ–±—Ä–æ–±–ª—è—Ç–∏
VISION_SUPPORTED_TYPES: list[str] = [
    "meme",           # –ú–µ–º–∏
    "screenshot",     # –°–∫—Ä—ñ–Ω—à–æ—Ç–∏ –≥—Ä–∏
    "text",           # –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ —Ç–µ–∫—Å—Ç–æ–º
    "profile",        # –ü—Ä–æ—Ñ—ñ–ª—å–Ω—ñ –¥–∞–Ω—ñ –≥—Ä–∞–≤—Ü—ñ–≤
    "stats",          # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥—Ä–∞–≤—Ü—ñ–≤
    "gameplay",       # –Ü–≥—Ä–æ–≤–∏–π –ø—Ä–æ—Ü–µ—Å
    "hero",           # –ì–µ—Ä–æ—ó MLBB
    "items",          # –ü—Ä–µ–¥–º–µ—Ç–∏ –≤ –≥—Ä—ñ
    "patch_notes",    # –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≥—Ä–∏
    "tournament",     # –¢—É—Ä–Ω—ñ—Ä–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏
    "general"         # –ó–∞–≥–∞–ª—å–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
]

# –ï–º–æ–¥–∑—ñ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç—É
VISION_CONTENT_EMOJIS: dict[str, str] = {
    "meme": "üòÇ",
    "screenshot": "üì∏", 
    "text": "üìù",
    "profile": "üë§",
    "stats": "üìä",
    "gameplay": "üéÆ",
    "hero": "ü¶∏",
    "items": "‚öîÔ∏è",
    "patch_notes": "üìã",
    "tournament": "üèÜ",
    "general": "üîç"
}

# === –ü–ï–†–ï–í–Ü–†–ö–ê –ö–†–ò–¢–ò–ß–ù–ò–• –ó–ú–Ü–ù–ù–ò–• ===
if not TELEGRAM_BOT_TOKEN or not OPENAI_API_KEY:
    logger.critical("‚ùå TELEGRAM_BOT_TOKEN —Ç–∞ OPENAI_API_KEY –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –≤ .env —Ñ–∞–π–ª—ñ")
    raise RuntimeError("‚ùå –í—Å—Ç–∞–Ω–æ–≤–∏ TELEGRAM_BOT_TOKEN —Ç–∞ OPENAI_API_KEY –≤ .env —Ñ–∞–π–ª—ñ")

logger.info(f"–ú–æ–¥–µ–ª—å –¥–ª—è Vision (–∞–Ω–∞–ª—ñ–∑ —Å–∫—Ä—ñ–Ω—à–æ—Ç—ñ–≤): gpt-4o-mini (–∂–æ—Ä—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–æ)")
logger.info(f"–ú–æ–¥–µ–ª—å –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ü—ñ–π (/go, –æ–ø–∏—Å –ø—Ä–æ—Ñ—ñ–ª—é): gpt-4.1-turbo (–∂–æ—Ä—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–æ)")
logger.info(f"üÜï –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π Vision –º–æ–¥—É–ª—å: {'–£–í–Ü–ú–ö–ù–ï–ù–û' if VISION_AUTO_RESPONSE_ENABLED else '–í–ò–ú–ö–ù–ï–ù–û'}")
