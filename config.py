# config.py
import logging
import os
from dotenv import load_dotenv

# === –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø –õ–û–ì–£–í–ê–ù–ù–Ø ===
logging.basicConfig(
    level=logging.INFO,
    format="%(asctime)s | %(levelname)-8s | %(name)s | %(message)s"
)
logger = logging.getLogger(__name__)

# === –ó–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ø –ó–ú–Ü–ù–ù–ò–• –°–ï–†–ï–î–û–í–ò–©–ê ===
# load_dotenv() –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è.
# –ù–∞ Heroku Config Vars –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.
load_dotenv()

# === –ó–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ø –ö–õ–Æ–ß–Ü–í –¢–ê URL ===
TELEGRAM_BOT_TOKEN: str = os.getenv("TELEGRAM_BOT_TOKEN", "")
OPENAI_API_KEY: str = os.getenv("OPENAI_API_KEY", "")
GEMINI_API_KEY: str = os.getenv("API_Gemini", "")
GOOGLE_CLOUD_PROJECT_ID: str = os.getenv("GOOGLE_CLOUD_PROJECT_ID", "")
ADMIN_USER_ID: int = int(os.getenv("ADMIN_USER_ID", "0"))

# –†–æ–∑–¥—ñ–ª–µ–Ω–æ URL –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏—Ö —Ç–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π
SYNC_DATABASE_URL: str = os.getenv("DATABASE_URL", "")
ASYNC_DATABASE_URL: str = os.getenv("AS_BASE", "") # –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ AS_BASE –¥–ª—è async

# === –ö–û–ù–°–¢–ê–ù–¢–ò ===
WELCOME_IMAGE_URL: str = "https://res.cloudinary.com/ha1pzppgf/image/upload/v1748286434/file_0000000017a46246b78bf97e2ecd9348_zuk16r.png"
MAX_TELEGRAM_MESSAGE_LENGTH: int = 4090
MAX_CHAT_HISTORY_LENGTH: int = 10

# === –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø –î–õ–Ø –ê–î–ê–ü–¢–ò–í–ù–û–á –ü–†–ò–°–£–¢–ù–û–°–¢–Ü ===
BOT_NAMES: list[str] = [
    "–±–æ—Ç", "genius", "iui", # –û—Å–Ω–æ–≤–Ω—ñ
    "gg", "–≥–≥",             # –Ü–≥—Ä–æ–≤—ñ –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è
    "ai", "–∞—ñ", "—ñ—ñ"        # –¢–µ—Ö–Ω—ñ—á–Ω—ñ —Ç–∞ —Ñ–æ–Ω–µ—Ç–∏—á–Ω—ñ –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è
]
CONVERSATIONAL_COOLDOWN_SECONDS: int = 600 # 10 —Ö–≤–∏–ª–∏–Ω

# === –ù–û–í–ê –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø –î–õ–Ø –ü–ê–¢–Ü-–ú–ï–ù–ï–î–ñ–ï–†–ê ===
PARTY_TRIGGER_PHRASES: list[str] = [
    "—Ö—Ç–æ –≤ –ø–∞—Ç—ñ", "–≥–æ –ø–∞—Ç—ñ", "–∑–±–∏—Ä–∞—é –ø–∞—Ç—ñ", "—à—É–∫–∞—é –ø–∞—Ç—ñ", "–ø–æ–≥–Ω–∞–ª–∏ –ø–∞—Ç—ñ",
    "—Ö—Ç–æ –≥—Ä–∞—Ç–∏", "–≥–æ –≥—Ä–∞—Ç–∏", "–ø–æ–≥–Ω–∞–ª–∏ –≥—Ä–∞—Ç–∏", "—Ö—Ç–æ –∫–∞—Ç–∫—É",
    "–ø–∞—Ç—ñ", "–∑–±—ñ—Ä", "—Ç—ñ–º–∞", "—Ç—ñ–º—É", "–∫–∞—Ç–∫—É",
    "+ –≤ –ø–∞—Ç—ñ", "—Ö—Ç–æ +", "–ø–ª—é—Å –≤ –ø–∞—Ç—ñ",
    "—î —Ö—Ç–æ –≥—Ä–∞—Ç–∏", "–ø–æ–≥–Ω–∞–ª–∏ –≤ –ø–∞—Ç—ñ", "–∑–±—ñ—Ä –Ω–∞ —Ä–µ–π—Ç–∏–Ω–≥", "–≥–æ –Ω–∞ —Ä–µ–π—Ç",
    "—à—É–∫–∞—é —Ç—ñ–º–µ–π—Ç—ñ–≤", "–≥–æ –∫–∞—Ç–∫—É —Ä–∞–∑–æ–º"
]
PARTY_LOBBY_ROLES: list[str] = ["–¢–∞–Ω–∫/–ü—ñ–¥—Ç—Ä–∏–º–∫–∞", "–õ—ñ—Å–Ω–∏–∫", "–ú–∞–≥ (–º—ñ–¥)", "–°—Ç—Ä—ñ–ª–µ—Ü—å (–∑–æ–ª–æ—Ç–æ)", "–ë–æ—î—Ü—å (–¥–æ—Å–≤—ñ–¥)"]
PARTY_LOBBY_COOLDOWN_SECONDS: int = 60 # 1 —Ö–≤–∏–ª–∏–Ω–∞ –Ω–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ª–æ–±—ñ –≤ —á–∞—Ç—ñ

# === –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø –¢–†–ò–ì–ï–†–Ü–í –î–õ–Ø –†–û–ó–ú–û–í–ò ===
CONVERSATIONAL_TRIGGERS: dict[str, str] = {
    "—è–∫ —Å–ø—Ä–∞–≤–∏": "–î—Ä—É–∂–Ω—å–æ —ñ –∫–æ—Ä–æ—Ç–∫–æ –ø–æ—Ü—ñ–∫–∞–≤—Å—è, —è–∫ —Å–ø—Ä–∞–≤–∏ —É —Å–ø—ñ–≤—Ä–æ–∑–º–æ–≤–Ω–∏–∫–∞.",
    "—â–æ —Ä–æ–±–∏—à": "–í—ñ–¥–ø–æ–≤—ñ–¥–∞–π –∫–æ—Ä–æ—Ç–∫–æ —ñ –∑ –≥—É–º–æ—Ä–æ–º, –Ω—ñ–±–∏ —Ç–µ–±–µ –≤—ñ–¥–≤–æ–ª—ñ–∫–ª–∏ –≤—ñ–¥ –∞–Ω–∞–ª—ñ–∑—É —Ä–µ–ø–ª–µ—ó–≤.",
    "–ø—Ä–∏–≤—ñ—Ç": "–ü—Ä–∏–≤—ñ—Ç–∞–π—Å—è —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –º–æ–ª–æ–¥—ñ–∂–Ω–∏–π —Å–ª–µ–Ω–≥.",
    "–¥—è–∫—É—é": "–í—ñ–¥–ø–æ–≤—ñ–¥–∞–π –ª—é–±'—è–∑–Ω–æ, —â–æ –∑–∞–≤–∂–¥–∏ —Ä–∞–¥–∏–π –¥–æ–ø–æ–º–æ–≥—Ç–∏, –∞–¥–∂–µ —Ç–∏ GGenius.",
    "—â–æ —Ç–∏ –≤–º—ñ—î—à": "–†–æ–∑–∫–∞–∂–∏ –∫–æ—Ä–æ—Ç–∫–æ –ø—Ä–æ —Å–≤–æ—ó –æ—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó: –∞–Ω–∞–ª—ñ–∑ —Å–∫—Ä—ñ–Ω—à–æ—Ç—ñ–≤, –ø–æ—Ä–∞–¥–∏ –ø–æ –≥—Ä—ñ —Ç–∞ –¥–æ–ø–æ–º–æ–≥–∞ —É –∑–±–æ—Ä—ñ –ø–∞—Ç—ñ.",
    "—Ö—Ç–æ —Ç–µ–±–µ —Å—Ç–≤–æ—Ä–∏–≤": "–í—ñ–¥–ø–æ–≤—ñ–¥–∞–π –∑ –ø–æ–≤–∞–≥–æ—é —Ç–∞ –≥—É–º–æ—Ä–æ–º, —â–æ —Ç–∏ ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∞—Ü—ñ —Ç–∞ –≥–µ–Ω—ñ—è MLBB-BOSS, —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –¥–ª—è —Å–ø—ñ–ª—å–Ω–æ—Ç–∏.",
    "—Ç–∏ –±–æ—Ç": "–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏, —â–æ —Ç–∏ AI, –∞–ª–µ –∑ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º —Å–ø—Ä–∞–≤–∂–Ω—å–æ–≥–æ –≥–µ–π–º–µ—Ä–∞."
}

# === –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø –£–ù–Ü–í–ï–†–°–ê–õ–¨–ù–û–ì–û VISION –ú–û–î–£–õ–Ø ===
VISION_AUTO_RESPONSE_ENABLED: bool = True
VISION_RESPONSE_COOLDOWN_SECONDS: int = 30
VISION_MAX_IMAGE_SIZE_MB: float = 10.0
VISION_QUALITY_THRESHOLD: str = "low"

VISION_SUPPORTED_TYPES: list[str] = [
    "meme", "screenshot", "text", "profile", "stats", "gameplay", "hero",
    "items", "patch_notes", "tournament", "general"
]

VISION_CONTENT_EMOJIS: dict[str, str] = {
    "meme": "üòÇ", "screenshot": "üì∏", "text": "üìù", "profile": "üë§",
    "stats": "üìä", "gameplay": "üéÆ", "hero": "ü¶∏", "items": "‚öîÔ∏è",
    "patch_notes": "üìã", "tournament": "üèÜ", "general": "üîç"
}

# === –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø REPLY KEYBOARD –ù–ê–í–Ü–ì–ê–¶–Ü–á ===
REPLY_KEYBOARD_ENABLED: bool = True
SHOW_COMMANDS_HELP: bool = False

BOT_MODES: dict[str, str] = {
    "main": "–ì–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é", "go": "AI-–∞—Å–∏—Å—Ç–µ–Ω—Ç —Ä–µ–∂–∏–º",
    "analysis": "–†–µ–∂–∏–º –∞–Ω–∞–ª—ñ–∑—É", "party": "–†–µ–∂–∏–º –∑–±–æ—Ä—É –ø–∞—Ç—ñ"
}

NAVIGATION_TEXTS: dict[str, str] = {
    "welcome": "üéÆ –õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ GGenius!\n\n–û–±–µ—Ä—ñ—Ç—å –ø–æ—Ç—Ä—ñ–±–Ω—É –¥—ñ—é –∑ –º–µ–Ω—é –Ω–∏–∂—á–µ:",
    "go_mode": "ü§ñ –†–µ–∂–∏–º AI-–∞—Å–∏—Å—Ç–µ–Ω—Ç–∞ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ!\n\n–ó–∞–¥–∞–≤–∞–π—Ç–µ –±—É–¥—å-—è–∫—ñ –ø–∏—Ç–∞–Ω–Ω—è –ø—Ä–æ MLBB, —ñ —è –¥–∞–º –¥–µ—Ç–∞–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å:",
    "profile_mode": "üßë‚Äçüíº –†–µ–∂–∏–º –∞–Ω–∞–ª—ñ–∑—É –ø—Ä–æ—Ñ—ñ–ª—é!\n\n–ù–∞–¥—ñ—à–ª—ñ—Ç—å —Å–∫—Ä—ñ–Ω—à–æ—Ç –≤–∞—à–æ–≥–æ –ø—Ä–æ—Ñ—ñ–ª—é –≤ MLBB –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É:",
    "stats_mode": "üìä –†–µ–∂–∏–º –∞–Ω–∞–ª—ñ–∑—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏!\n\n–ù–∞–¥—ñ—à–ª—ñ—Ç—å —Å–∫—Ä—ñ–Ω—à–æ—Ç –≤–∞—à–æ—ó —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ MLBB:",
    "party_mode": "üéÆ –†–µ–∂–∏–º –∑–±–æ—Ä—É –ø–∞—Ç—ñ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ!\n\n–ù–∞–ø–∏—à—ñ—Ç—å –ø—Ä–æ –ø–æ—à—É–∫ –∫–æ–º–∞–Ω–¥–∏, —ñ —è –¥–æ–ø–æ–º–æ–∂—É –æ—Ä–≥–∞–Ω—ñ–∑—É–≤–∞—Ç–∏ –ª–æ–±—ñ:",
    "back_to_main": "üè† –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ—Å—è –¥–æ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é.",
    "help_text": "‚ùì –î–æ–ø–æ–º–æ–≥–∞:\n\nüßë‚Äçüíº **–ü—Ä–æ—Ñ—ñ–ª—å** - –∞–Ω–∞–ª—ñ–∑ —Å–∫—Ä—ñ–Ω—à–æ—Ç–∞ –ø—Ä–æ—Ñ—ñ–ª—é\nüìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –∞–Ω–∞–ª—ñ–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∞–∫–∫–∞—É–Ω—Ç—É\nü§ñ **GO** - —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π AI-–∞—Å–∏—Å—Ç–µ–Ω—Ç\nüéÆ **–ó—ñ–±—Ä–∞—Ç–∏ –ø–∞—Ç—ñ** - –¥–æ–ø–æ–º–æ–≥–∞ –≤ –ø–æ—à—É–∫—É –∫–æ–º–∞–Ω–¥–∏"
}

# === –ü–ï–†–ï–í–Ü–†–ö–ê –ö–†–ò–¢–ò–ß–ù–ò–• –ó–ú–Ü–ù–ù–ò–• ===
# –û–Ω–æ–≤–ª–µ–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É, —Ç–µ–ø–µ—Ä –≤–∫–ª—é—á–∞—î –æ–±–∏–¥–≤–∞ URL –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
if not all([TELEGRAM_BOT_TOKEN, OPENAI_API_KEY, GEMINI_API_KEY, GOOGLE_CLOUD_PROJECT_ID, SYNC_DATABASE_URL, ASYNC_DATABASE_URL]):
    critical_vars = {
        "TELEGRAM_BOT_TOKEN": bool(TELEGRAM_BOT_TOKEN),
        "OPENAI_API_KEY": bool(OPENAI_API_KEY),
        "API_Gemini": bool(GEMINI_API_KEY),
        "GOOGLE_CLOUD_PROJECT_ID": bool(GOOGLE_CLOUD_PROJECT_ID),
        "DATABASE_URL (sync)": bool(SYNC_DATABASE_URL),
        "AS_BASE (async)": bool(ASYNC_DATABASE_URL)
    }
    missing_vars = [key for key, value in critical_vars.items() if not value]
    error_message = f"‚ùå –ù–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤—ñ –∑–º—ñ–Ω–Ω—ñ –≤ Heroku Config Vars: {', '.join(missing_vars)}"
    logger.critical(error_message)
    raise RuntimeError(error_message)

# –î–æ–¥–∞–Ω–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏, —â–æ –∑–º—ñ–Ω–Ω—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ
logger.info(f"–ú–æ–¥–µ–ª—å –¥–ª—è Vision (–∞–Ω–∞–ª—ñ–∑ —Å–∫—Ä—ñ–Ω—à–æ—Ç—ñ–≤): gpt-4o-mini (–∂–æ—Ä—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–æ)")
logger.info(f"–ú–æ–¥–µ–ª—å –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ü—ñ–π (/go, –æ–ø–∏—Å –ø—Ä–æ—Ñ—ñ–ª—é): gpt-4.1-turbo (–∂–æ—Ä—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–æ)")
logger.info(f"–ú–æ–¥–µ–ª—å –¥–ª—è –ø–æ—à—É–∫—É –≤ –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç—ñ (/search): Gemini 2.5 Pro (–∂–æ—Ä—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–æ)")
logger.info(f"–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π Vision –º–æ–¥—É–ª—å: {'–£–í–Ü–ú–ö–ù–ï–ù–û' if VISION_AUTO_RESPONSE_ENABLED else '–í–ò–ú–ö–ù–ï–ù–û'}")
logger.info(f"Reply Keyboard –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è: {'–£–í–Ü–ú–ö–ù–ï–ù–û' if REPLY_KEYBOARD_ENABLED else '–í–ò–ú–ö–ù–ï–ù–û'}")
logger.info(f"‚úÖ Google Cloud Project ID: '{GOOGLE_CLOUD_PROJECT_ID}' –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ.")
logger.info(f"‚úÖ Gemini API Key –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ (–ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ Heroku Config Vars).")
logger.info(f"‚úÖ SYNC_DATABASE_URL –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ (–ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ Heroku Config Vars).")
logger.info(f"‚úÖ ASYNC_DATABASE_URL (–∑ AS_BASE) –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ (–ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ Heroku Config Vars).")
